/*
 HTTP Auth Interceptor Module for AngularJS
 (c) 2012 Witold Szczerba
 License: MIT
*/
(function(){angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,f){return{loginConfirmed:function(c,d){var a=d||function(b){return b};e.$broadcast("event:auth-loginConfirmed",c);f.retryAll(a)},loginCancelled:function(c,d){f.rejectAll(d);e.$broadcast("event:auth-loginCancelled",c)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,c,d){return{responseError:function(a){if(401===
a.status&&!a.config.ignoreAuthModule){var b=c.defer();d.append(a.config,b);e.$broadcast("event:auth-loginRequired",a);return b.promise}return c.reject(a)}}}])}]);angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function f(a,b){d=d||e.get("$http");d(a).then(function(a){b.resolve(a)},function(a){b.reject(a)})}var c=[],d;return{append:function(a,b){c.push({config:a,deferred:b})},rejectAll:function(a){if(a)for(var b=0;b<c.length;++b)c[b].deferred.reject(a);
c=[]},retryAll:function(a){for(var b=0;b<c.length;++b)f(a(c[b].config),c[b].deferred);c=[]}}}])})();
